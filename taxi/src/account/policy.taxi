namespace com.example.account

model Secret

policy EnforceAccess against Secret (category: AccountCategory) ->  {
  read {
    when {
      category == null -> throw((NotAuthorizedError)  { message: "Not Authrozied" })
      category == "S1234" -> Secret
      else -> throw( (BadRequestError)  {
         code: AccountErrors.enumForName(category).code,
         message: AccountErrors.enumForName(category).message
      })
    }
  }
}
